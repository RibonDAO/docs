"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[376],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return d}});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=r.createContext({}),c=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},p=function(e){var t=c(e.components);return r.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},h=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),h=c(n),d=o,m=h["".concat(l,".").concat(d)]||h[d]||u[d]||a;return n?r.createElement(m,s(s({ref:t},p),{},{components:n})):r.createElement(m,s({ref:t},p))}));function d(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,s=new Array(a);s[0]=h;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:o,s[1]=i;for(var c=2;c<a;c++)s[c]=n[c];return r.createElement.apply(null,s)}return r.createElement.apply(null,n)}h.displayName="MDXCreateElement"},5574:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return l},default:function(){return d},frontMatter:function(){return i},metadata:function(){return c},toc:function(){return u}});var r=n(7462),o=n(3366),a=(n(7294),n(3905)),s=["components"],i={sidebar_position:2},l="Helpers",c={unversionedId:"interface/how-to-test/helpers",id:"interface/how-to-test/helpers",title:"Helpers",description:"We have some helpers that make it easier to test your code. They are built on top of jest and react-testing-library",source:"@site/docs/interface/how-to-test/helpers.mdx",sourceDirName:"interface/how-to-test",slug:"/interface/how-to-test/helpers",permalink:"/docs/docs/interface/how-to-test/helpers",draft:!1,editUrl:"https://github.com/RibonDAO/docs/docs/interface/how-to-test/helpers.mdx",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Tools used to test",permalink:"/docs/docs/interface/how-to-test/intro"},next:{title:"Components and Pages",permalink:"/docs/docs/interface/how-to-test/components-and-pages"}},p={},u=[{value:"expects helpers",id:"expects-helpers",level:3},{value:"test helpers",id:"test-helpers",level:3},{value:"mock helpers",id:"mock-helpers",level:2}],h={toc:u};function d(e){var t=e.components,n=(0,o.Z)(e,s);return(0,a.kt)("wrapper",(0,r.Z)({},h,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"helpers"},"Helpers"),(0,a.kt)("p",null,"We have some helpers that make it easier to test your code. They are built on top of ",(0,a.kt)("inlineCode",{parentName:"p"},"jest")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"react-testing-library"),"\nand make it easier to reuse some normal behavior that we have on tests. You can check them on ",(0,a.kt)("inlineCode",{parentName:"p"},"src/config/testUtils")," directory."),(0,a.kt)("p",null,"The most common helpers to use are the following:"),(0,a.kt)("h3",{id:"expects-helpers"},"expects helpers"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"expectTextToBeInTheDocument")," - used to check if a text is rendered in the document."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"expectTextNotToBeInTheDocument")," - used to check if a text is not rendered in the document."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"expectImageToBeInTheDocument")," - used to check if an image is rendered in the document. (based on its alt attribute)"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"expectLogErrorToHaveBeenCalled")," - used to check if the logError function has been called. (This function is used to log errors to sentry. We commonly test this cases when dealing with sad paths)"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"expectLogEventToHaveBeenCalledWith")," - used to check if the logEvent function has been called with the expected arguments. (This function is used to log events to firebase analytics. We commonly use this helper to check if a page logs the event it is meant to log)"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"expectPageToNavigateTo")," - used to check if the page navigates to the expected url with correct params. (This checks if the navigateTo function is called with correct arguments, simulating that the page has navigated to the expected url)")),(0,a.kt)("h3",{id:"test-helpers"},"test helpers"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"renderComponent")," - used to render a component. It is the main way to render a component in tests, since it already\nputs all the contexts and navigation resources that the component rendered would need.\nWith it you can mock the context values. For example, you can pass:")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'renderComponent(<Component />, {\n  walletProviderValue: {\n    wallet: "0xFFFF",\n  },\n});\n')),(0,a.kt)("p",null,'To mock the wallet context and use the wallet value "0xFFFF" instead of the real one.\nAll the options and the types are already defined in that component. Feel free to check on other tests as well to see how it is used.'),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"renderHook")," - used to render a hook. It is the main way to render a hook since they have to be inside a component.\nIt is built on top of ",(0,a.kt)("inlineCode",{parentName:"li"},"renderHook")," from react-testing-library.\nYou can mock context values like the renderComponent helper. Below there is an example of usage:")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'const { hook } = renderHook(() => useSomething(args), {\n  walletProviderValue: {\n    wallet: "0xFFFF",\n  },\n});\n')),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"clickOn")," - used to click on something in the document. You can pass a string that represents the text of the thing you want to click (like a button)\nor you can pass a component or a query directly.")),(0,a.kt)("h2",{id:"mock-helpers"},"mock helpers"),(0,a.kt)("p",null,"There are 2 main mock helpers that help us to mock api requests and graphql requests."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"mockRequest")," - used to mock a rest api request. It takes the url and the response as arguments. You can pass as the second options the request options, such as\nthe ",(0,a.kt)("inlineCode",{parentName:"li"},"payload")," (response body which will be returned by the request), the ",(0,a.kt)("inlineCode",{parentName:"li"},"status")," (response status returned) and the ",(0,a.kt)("inlineCode",{parentName:"li"},"method")," (request method, such as GET, POST, etc.).")),(0,a.kt)("p",null,"You can use it like this before a test suite:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'mockRequest("/url-to-be-mocked", {\n    payload: [responseToMock],\n    status: 200,\n    method: "GET",\n});\n')),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"mockGraphqlRequest")," - used to mock a graphql request. It takes the query name and response data as params.\nThe ",(0,a.kt)("inlineCode",{parentName:"li"},"queryName")," argument is the name of the query, defined in the ",(0,a.kt)("inlineCode",{parentName:"li"},"src/services/apiTheGraph")," directory.\nThe ",(0,a.kt)("inlineCode",{parentName:"li"},"responseData")," is the response that the query will return.")),(0,a.kt)("p",null,"You can use it like this before a test suite:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'mockGraphqlRequest("query-name", {\n  result: "some-result"\n});\n')),(0,a.kt)("p",null,"If you see any other helper that could be common on our application, feel free to send a PR to add them."))}d.isMDXComponent=!0}}]);